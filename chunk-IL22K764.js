import{a as Oe,c as Fe,d as Ke,g as Le}from"./chunk-XTKGURG6.js";import{Ab as _e,Ba as Z,Da as v,Db as s,Eb as k,Jb as je,Ma as Pe,Oa as ke,R as A,T as f,V as W,Za as xe,_ as R,_a as Te,a as Y,fa as I,ga as F,gb as q,ha as c,hb as P,ka as Ae,ma as Re,rb as Q,ya as Ie}from"./chunk-VTYUZ2GX.js";import{a as m,b as X}from"./chunk-WMVSLYLA.js";var ee=0;function qe(){return ee}function p(t,e){return(...r)=>{try{return ee=e,t(...r)}finally{ee=0}}}function Qe(t){return!t}function Ve(t){return t}function u(t){return Array.isArray(t)}function M(t){return(typeof t=="object"||typeof t=="function")&&t!=null}var b=Symbol(),$=Symbol(),T=class{predicates;fns=[];constructor(e){this.predicates=e}push(e){this.fns.push(ze(this.predicates,e))}mergeIn(e){let r=this.predicates?e.fns.map(n=>ze(this.predicates,n)):e.fns;this.fns.push(...r)}},L=class extends T{get defaultValue(){return!1}compute(e){return this.fns.some(r=>{let n=r(e);return n&&n!==$})}},S=class t extends T{ignore;static ignoreNull(e){return new t(e,r=>r===null)}constructor(e,r){super(e),this.ignore=r}get defaultValue(){return[]}compute(e){return this.fns.reduce((r,n)=>{let i=n(e);return i===void 0||i===$?r:u(i)?[...r,...this.ignore?i.filter(a=>!this.ignore(a)):i]:this.ignore&&this.ignore(i)?r:[...r,i]},[])}},te=class extends S{constructor(e){super(e,void 0)}},re=class extends T{key;get defaultValue(){return this.key.reducer.getInitial()}constructor(e,r){super(e),this.key=r}compute(e){if(this.fns.length===0)return this.key.reducer.getInitial();let r=this.key.reducer.getInitial();for(let n=0;n<this.fns.length;n++){let i=this.fns[n](e);i!==$&&(r=this.key.reducer.reduce(r,i))}return r}};function ze(t,e){return t.length===0?e:r=>{for(let n of t){let i=r.stateOf(n.path),a=c(i.structure.pathKeys).length-n.depth;for(let d=0;d<a;d++)i=i.structure.parent;if(!n.fn(i.context))return $}return e(r)}}var E=class{predicates;hidden;disabledReasons;readonly;syncErrors;syncTreeErrors;asyncErrors;metadata=new Map;constructor(e){this.predicates=e,this.hidden=new L(e),this.disabledReasons=new te(e),this.readonly=new L(e),this.syncErrors=S.ignoreNull(e),this.syncTreeErrors=S.ignoreNull(e),this.asyncErrors=S.ignoreNull(e)}hasMetadata(e){return this.metadata.has(e)}getMetadataKeys(){return this.metadata.keys()}getMetadata(e){return this.metadata.has(e)||this.metadata.set(e,new re(this.predicates,e)),this.metadata.get(e)}mergeIn(e){this.hidden.mergeIn(e.hidden),this.disabledReasons.mergeIn(e.disabledReasons),this.readonly.mergeIn(e.readonly),this.syncErrors.mergeIn(e.syncErrors),this.syncTreeErrors.mergeIn(e.syncTreeErrors),this.asyncErrors.mergeIn(e.asyncErrors);for(let r of e.getMetadataKeys()){let n=e.metadata.get(r);this.getMetadata(r).mergeIn(n)}}},V=class{depth;constructor(e){this.depth=e}build(){return new z(this,[],0)}},N=class t extends V{constructor(e){super(e)}current;all=[];addHiddenRule(e){this.getCurrent().addHiddenRule(e)}addDisabledReasonRule(e){this.getCurrent().addDisabledReasonRule(e)}addReadonlyRule(e){this.getCurrent().addReadonlyRule(e)}addSyncErrorRule(e){this.getCurrent().addSyncErrorRule(e)}addSyncTreeErrorRule(e){this.getCurrent().addSyncTreeErrorRule(e)}addAsyncErrorRule(e){this.getCurrent().addAsyncErrorRule(e)}addMetadataRule(e,r){this.getCurrent().addMetadataRule(e,r)}getChild(e){if(e===b){let r=this.getCurrent().children;r.size>(r.has(b)?1:0)&&(this.current=void 0)}return this.getCurrent().getChild(e)}hasLogic(e){return this===e?!0:this.all.some(({builder:r})=>r.hasLogic(e))}mergeIn(e,r){r?this.all.push({builder:e,predicate:{fn:p(r.fn,this.depth),path:r.path}}):this.all.push({builder:e}),this.current=void 0}getCurrent(){return this.current===void 0&&(this.current=new _(this.depth),this.all.push({builder:this.current})),this.current}static newRoot(){return new t(0)}},_=class extends V{logic=new E([]);children=new Map;constructor(e){super(e)}addHiddenRule(e){this.logic.hidden.push(p(e,this.depth))}addDisabledReasonRule(e){this.logic.disabledReasons.push(p(e,this.depth))}addReadonlyRule(e){this.logic.readonly.push(p(e,this.depth))}addSyncErrorRule(e){this.logic.syncErrors.push(p(e,this.depth))}addSyncTreeErrorRule(e){this.logic.syncTreeErrors.push(p(e,this.depth))}addAsyncErrorRule(e){this.logic.asyncErrors.push(p(e,this.depth))}addMetadataRule(e,r){this.logic.getMetadata(e).push(p(r,this.depth))}getChild(e){return this.children.has(e)||this.children.set(e,new N(this.depth+1)),this.children.get(e)}hasLogic(e){return this===e}},z=class t{builder;predicates;depth;logic;constructor(e,r,n){this.builder=e,this.predicates=r,this.depth=n,this.logic=e?Je(e,r,n):new E([])}getChild(e){let r=this.builder?He(this.builder,e):[];if(r.length===0)return new t(void 0,[],this.depth+1);if(r.length===1){let{builder:n,predicates:i}=r[0];return new t(n,[...this.predicates,...i.map(a=>ie(a,this.depth))],this.depth+1)}else{let n=r.map(({builder:i,predicates:a})=>new t(i,[...this.predicates,...a.map(d=>ie(d,this.depth))],this.depth+1));return new ne(n)}}hasLogic(e){return this.builder?.hasLogic(e)??!1}},ne=class t{all;logic;constructor(e){this.all=e,this.logic=new E([]);for(let r of e)this.logic.mergeIn(r.logic)}getChild(e){return new t(this.all.flatMap(r=>r.getChild(e)))}hasLogic(e){return this.all.some(r=>r.hasLogic(e))}};function He(t,e){if(t instanceof N)return t.all.flatMap(({builder:r,predicate:n})=>{let i=He(r,e);return n?i.map(({builder:a,predicates:d})=>({builder:a,predicates:[...d,n]})):i});if(t instanceof _)return[...e!==b&&t.children.has(b)?[{builder:t.getChild(b),predicates:[]}]:[],...t.children.has(e)?[{builder:t.getChild(e),predicates:[]}]:[]];throw new Error("Unknown LogicNodeBuilder type")}function Je(t,e,r){let n=new E(e);if(t instanceof N){let i=t.all.map(({builder:a,predicate:d})=>new z(a,d?[...e,ie(d,r)]:e,r));for(let a of i)n.mergeIn(a.logic)}else if(t instanceof _)n.mergeIn(t.logic);else throw new Error("Unknown LogicNodeBuilder type");return n}function ie(t,e){return X(m({},t),{depth:e})}var Be=Symbol("PATH"),g=class t{keys;parent;keyInParent;root;children=new Map;fieldPathProxy=new Proxy(this,et);logicBuilder;constructor(e,r,n,i){this.keys=e,this.parent=n,this.keyInParent=i,this.root=r??this,n||(this.logicBuilder=N.newRoot())}get builder(){return this.logicBuilder?this.logicBuilder:this.parent.builder.getChild(this.keyInParent)}getChild(e){return this.children.has(e)||this.children.set(e,new t([...this.keys,e],this.root,this,e)),this.children.get(e)}mergeIn(e,r){let n=e.compile();this.builder.mergeIn(n.builder,r)}static unwrapFieldPath(e){return e[Be]}static newRoot(){return new t([],void 0,void 0,void 0)}},et={get(t,e){return e===Be?t:t.getChild(e).fieldPathProxy}},K,x=new Map,H=class t{schemaFn;constructor(e){this.schemaFn=e}compile(){if(x.has(this))return x.get(this);let e=g.newRoot();x.set(this,e);let r=K;try{K=e,this.schemaFn(e.fieldPathProxy)}finally{K=r}return e}static create(e){return e instanceof t?e:new t(e)}static rootCompile(e){try{return x.clear(),e===void 0?g.newRoot():e instanceof t?e.compile():new t(e).compile()}finally{x.clear()}}};function tt(t){return t instanceof H||typeof t=="function"}function ge(t){if(K!==g.unwrapFieldPath(t).root)throw new Error("A FieldPath can only be used directly within the Schema that owns it, **not** outside of it or within a sub-schema.")}function w(t,e,r){return ge(t),g.unwrapFieldPath(t).builder.addMetadataRule(e,r),e}var y={list(){return{reduce:(t,e)=>e===void 0?t:[...t,e],getInitial:()=>[]}},min(){return{reduce:(t,e)=>t===void 0||e===void 0?t??e:Math.min(t,e),getInitial:()=>{}}},max(){return{reduce:(t,e)=>t===void 0||e===void 0?t??e:Math.max(t,e),getInitial:()=>{}}},or(){return{reduce:(t,e)=>t||e,getInitial:()=>!1}},and(){return{reduce:(t,e)=>t&&e,getInitial:()=>!0}},override:rt};function rt(t){return{reduce:(e,r)=>r,getInitial:()=>t?.()}}var B=class{reducer;create;brand;constructor(e,r){this.reducer=e,this.create=r}};function h(t){return new B(t??y.override())}var pe=h(y.or()),Ge=h(y.max()),$e=h(y.min()),ye=h(y.max()),ve=h(y.min()),Ue=h(y.list());function nt(t){return t.errors().length>0?"invalid":t.pending()?"unknown":"valid"}var ae=class{node;constructor(e){this.node=e}rawSyncTreeErrors=s(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncTreeErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawSyncTreeErrors()??[]]);syncErrors=s(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.syncErrors.compute(this.node.context),...this.syncTreeErrors(),...it(this.node.submitState.serverErrors())]);syncValid=s(()=>this.shouldSkipValidation()?!0:this.node.structure.reduceChildren(this.syncErrors().length===0,(e,r)=>r&&e.validationState.syncValid(),Qe));syncTreeErrors=s(()=>this.rawSyncTreeErrors().filter(e=>e.field===this.node.fieldProxy));rawAsyncErrors=s(()=>this.shouldSkipValidation()?[]:[...this.node.logicNode.logic.asyncErrors.compute(this.node.context),...this.node.structure.parent?.validationState.rawAsyncErrors()??[]]);asyncErrors=s(()=>this.shouldSkipValidation()?[]:this.rawAsyncErrors().filter(e=>e==="pending"||e.field===this.node.fieldProxy));errors=s(()=>[...this.syncErrors(),...this.asyncErrors().filter(e=>e!=="pending")]);errorSummary=s(()=>this.node.structure.reduceChildren(this.errors(),(e,r)=>[...r,...e.errorSummary()]));pending=s(()=>this.node.structure.reduceChildren(this.asyncErrors().includes("pending"),(e,r)=>r||e.validationState.asyncErrors().includes("pending")));status=s(()=>{if(this.shouldSkipValidation())return"valid";let e=nt(this);return this.node.structure.reduceChildren(e,(r,n)=>n==="invalid"||r.validationState.status()==="invalid"?"invalid":n==="unknown"||r.validationState.status()==="unknown"?"unknown":"valid",r=>r==="invalid")});valid=s(()=>this.status()==="valid");invalid=s(()=>this.status()==="invalid");shouldSkipValidation=s(()=>this.node.hidden()||this.node.disabled()||this.node.readonly())};function it(t){return t===void 0?[]:u(t)?t:[t]}function be(t,e){if(u(t))for(let r of t)r.field??=e;else t&&(t.field??=e);return t}var de=h(),se=class{node;cache=new WeakMap;constructor(e){this.node=e}resolve(e){if(!this.cache.has(e)){let r=s(()=>{let n=g.unwrapFieldPath(e),i=this.node,a=qe();for(;a>0||!i.structure.logic.hasLogic(n.root.builder);)if(a--,i=i.structure.parent,i===void 0)throw new Error("Path is not part of this field tree.");for(let d of n.keys)if(i=i.structure.getChild(d),i===void 0)throw new Error(`Cannot resolve path .${n.keys.join(".")} relative to field ${["<root>",...this.node.structure.pathKeys()].join(".")}.`);return i.fieldProxy});this.cache.set(e,r)}return this.cache.get(e)()}get field(){return this.node.fieldProxy}get state(){return this.node}get value(){return this.node.structure.value}get key(){return this.node.structure.keyInParent}get pathKeys(){return this.node.structure.pathKeys}index=s(()=>{let e=this.key();if(!u(c(this.node.structure.parent.value)))throw new Error("RuntimeError: cannot access index, parent field is not an array");return Number(e)});fieldTreeOf=e=>this.resolve(e);stateOf=e=>this.resolve(e)();valueOf=e=>{let r=this.resolve(e)().value();if(r instanceof Le)throw new Error("Tried to read an 'AbstractControl' value form a 'form()'. Did you mean to use 'compatForm()' instead?");return r}},oe=class{node;metadata=new Map;constructor(e){this.node=e;for(let r of this.node.logicNode.logic.getMetadataKeys())if(r.create){let n=this.node.logicNode.logic.getMetadata(r),i=c(()=>W(this.node.structure.injector,()=>r.create(s(()=>n.compute(this.node.context)))));this.metadata.set(r,i)}}get(e){if(this.has(e)&&!this.metadata.has(e)){if(e.create)throw Error("Managed metadata cannot be created lazily");let r=this.node.logicNode.logic.getMetadata(e);this.metadata.set(e,s(()=>r.compute(this.node.context)))}return this.metadata.get(e)}has(e){return this.node.logicNode.logic.hasMetadata(e)}},at={get(t,e,r){let n=t(),i=n.structure.getChild(e);if(i!==void 0)return i.fieldProxy;let a=c(n.value);if(u(a)){if(e==="length")return n.value().length;if(e===Symbol.iterator)return()=>(n.value(),Array.prototype[Symbol.iterator].apply(n.fieldProxy))}if(M(a)&&e===Symbol.iterator)return function*(){for(let d in r)yield[d,r[d]]}},getOwnPropertyDescriptor(t,e){let r=c(t().value),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&!n.configurable&&(n.configurable=!0),n},ownKeys(t){let e=c(t().value);return typeof e=="object"&&e!==null?Reflect.ownKeys(e):[]}};function dt(t,e){let r=s(()=>t()[e()]);return r[Y]=t[Y],r.set=n=>{t.update(i=>st(i,n,e()))},r.update=n=>{r.set(n(c(r)))},r.asReadonly=()=>r,r}function st(t,e,r){if(u(t)){let n=[...t];return n[r]=e,n}else return X(m({},t),{[r]:e})}var G=class{logic;node;createChildNode;identitySymbol=Symbol();_injector=void 0;get injector(){return this._injector??=R.create({providers:[],parent:this.fieldManager.injector}),this._injector}constructor(e,r,n){this.logic=e,this.node=r,this.createChildNode=n}children(){let e=this.childrenMap();return e===void 0?[]:Array.from(e.byPropertyKey.values()).map(r=>c(r.reader))}getChild(e){let r=e.toString(),n=c(this.childrenMap)?.byPropertyKey.get(r)?.reader;return n||(n=this.createReader(r)),n()}reduceChildren(e,r,n){let i=this.childrenMap();if(!i)return e;let a=e;for(let d of i.byPropertyKey.values()){if(n?.(a))break;a=r(c(d.reader),a)}return a}destroy(){this.injector.destroy()}createKeyInParent(e,r,n){if(e.kind==="root")return Xe;if(r===void 0){let i=n;return s(()=>{if(this.parent.structure.getChild(i)!==this.node)throw new Error(`RuntimeError: orphan field, looking for property '${i}' of ${J(this.parent)}`);return i})}else{let i=n;return s(()=>{let a=this.parent.structure.value();if(!u(a))throw new Error(`RuntimeError: orphan field, expected ${J(this.parent)} to be an array`);let d=a[i];if(M(d)&&d.hasOwnProperty(this.parent.structure.identitySymbol)&&d[this.parent.structure.identitySymbol]===r)return i;for(let o=0;o<a.length;o++){let l=a[o];if(M(l)&&l.hasOwnProperty(this.parent.structure.identitySymbol)&&l[this.parent.structure.identitySymbol]===r)return i=o.toString()}throw new Error(`RuntimeError: orphan field, can't find element in array ${J(this.parent)}`)})}}createChildrenMap(){return k({source:this.value,computation:(e,r)=>{if(!M(e))return;let n=r?.value??{byPropertyKey:new Map},i,a=u(e);n!==void 0&&(a?i=ct(n,e,this.identitySymbol):i=ut(n,e));for(let d of Object.keys(e)){let o,l=e[d];if(l===void 0){n.byPropertyKey.has(d)&&(i??=m({},n),i.byPropertyKey.delete(d));continue}a&&M(l)&&!u(l)&&(o=l[this.identitySymbol]??=Symbol(""));let D;o&&(n.byTrackingKey?.has(o)||(i??=m({},n),i.byTrackingKey??=new Map,i.byTrackingKey.set(o,this.createChildNode(d,o,a))),D=(i??n).byTrackingKey.get(o));let U=n.byPropertyKey.get(d);U===void 0?(i??=m({},n),i.byPropertyKey.set(d,{reader:this.createReader(d),node:D??this.createChildNode(d,o,a)})):D&&D!==U.node&&(i??=m({},n),U.node=D)}return i??n}})}createReader(e){return s(()=>this.childrenMap()?.byPropertyKey.get(e)?.node)}},ce=class extends G{fieldManager;value;get parent(){}get root(){return this.node}get pathKeys(){return ot}get keyInParent(){return Xe}childrenMap;constructor(e,r,n,i,a){super(r,e,a),this.fieldManager=n,this.value=i,this.childrenMap=this.createChildrenMap()}},ue=class extends G{logic;parent;root;pathKeys;keyInParent;value;childrenMap;get fieldManager(){return this.root.structure.fieldManager}constructor(e,r,n,i,a,d){super(r,e,d),this.logic=r,this.parent=n,this.root=this.parent.structure.root,this.keyInParent=this.createKeyInParent({kind:"child",parent:n,pathNode:void 0,logic:r,initialKeyInParent:a,identityInParent:i,fieldAdapter:void 0},i,a),this.pathKeys=s(()=>[...n.structure.pathKeys(),this.keyInParent()]),this.value=dt(this.parent.structure.value,this.keyInParent),this.childrenMap=this.createChildrenMap(),this.fieldManager.structures.add(this)}};var ot=s(()=>[]),Xe=s(()=>{throw new Error("RuntimeError: the top-level field in the form has no parent")});function J(t){return`<root>.${t.structure.pathKeys().join(".")}`}function ct(t,e,r){let n,i=new Set(t.byPropertyKey.keys()),a=new Set(t.byTrackingKey?.keys());for(let d=0;d<e.length;d++){let o=e[d];i.delete(d.toString()),M(o)&&o.hasOwnProperty(r)&&a.delete(o[r])}if(i.size>0){n??=m({},t);for(let d of i)n.byPropertyKey.delete(d)}if(a.size>0){n??=m({},t);for(let d of a)n.byTrackingKey?.delete(d)}return n}function ut(t,e){let r;for(let n of t.byPropertyKey.keys())e.hasOwnProperty(n)||(r??=m({},t),r.byPropertyKey.delete(n));return r}var le=class{node;selfSubmitting=I(!1);serverErrors;constructor(e){this.node=e,this.serverErrors=k({source:this.node.structure.value,computation:()=>[]})}submitting=s(()=>this.selfSubmitting()||(this.node.structure.parent?.submitting()??!1))},j=class{structure;validationState;metadataState;nodeState;submitState;fieldAdapter;_context=void 0;get context(){return this._context??=new se(this)}fieldProxy=new Proxy(()=>this,at);pathNode;constructor(e){this.pathNode=e.pathNode,this.fieldAdapter=e.fieldAdapter,this.structure=this.fieldAdapter.createStructure(this,e),this.validationState=this.fieldAdapter.createValidationState(this,e),this.nodeState=this.fieldAdapter.createNodeState(this,e),this.metadataState=new oe(this),this.submitState=new le(this)}pendingSync=k({source:()=>this.value(),computation:(e,r)=>{r?.value?.abort()}});get logicNode(){return this.structure.logic}get value(){return this.structure.value}_controlValue=k(()=>this.value());get controlValue(){return this._controlValue.asReadonly()}get keyInParent(){return this.structure.keyInParent}get errors(){return this.validationState.errors}get errorSummary(){return this.validationState.errorSummary}get pending(){return this.validationState.pending}get valid(){return this.validationState.valid}get invalid(){return this.validationState.invalid}get dirty(){return this.nodeState.dirty}get touched(){return this.nodeState.touched}get disabled(){return this.nodeState.disabled}get disabledReasons(){return this.nodeState.disabledReasons}get hidden(){return this.nodeState.hidden}get readonly(){return this.nodeState.readonly}get fieldBindings(){return this.nodeState.fieldBindings}get submitting(){return this.submitState.submitting}get name(){return this.nodeState.name}get max(){return this.metadata($e)}get maxLength(){return this.metadata(ve)}get min(){return this.metadata(Ge)}get minLength(){return this.metadata(ye)}get pattern(){return this.metadata(Ue)??lt}get required(){return this.metadata(pe)??ht}metadata(e){return this.metadataState.get(e)}hasMetadata(e){return this.metadataState.has(e)}markAsTouched(){this.nodeState.markAsTouched(),this.pendingSync()?.abort(),this.sync()}markAsDirty(){this.nodeState.markAsDirty()}reset(e){c(()=>this._reset(e))}_reset(e){e!==void 0&&this.value.set(e),this.nodeState.markAsUntouched(),this.nodeState.markAsPristine();for(let r of this.structure.children())r._reset()}setControlValue(e){this._controlValue.set(e),this.markAsDirty(),this.debounceSync()}sync(){this.value.set(this.controlValue())}async debounceSync(){this.pendingSync()?.abort();let e=this.nodeState.debouncer();if(e){let r=new AbortController,n=e(r.signal);if(n&&(this.pendingSync.set(r),await n,r.signal.aborted))return}this.sync()}static newRoot(e,r,n,i){return i.newRoot(e,r,n,i)}createStructure(e){return e.kind==="root"?new ce(this,e.logic,e.fieldManager,e.value,this.newChild.bind(this)):new ue(this,e.logic,e.parent,e.identityInParent,e.initialKeyInParent,this.newChild.bind(this))}newChild(e,r,n){let i,a;return n?(i=this.pathNode.getChild(b),a=this.structure.logic.getChild(b)):(i=this.pathNode.getChild(e),a=this.structure.logic.getChild(e)),this.fieldAdapter.newChild({kind:"child",parent:this,pathNode:i,logic:a,initialKeyInParent:e,identityInParent:r,fieldAdapter:this.fieldAdapter})}},lt=s(()=>[]),ht=s(()=>!1),he=class{node;selfTouched=I(!1);selfDirty=I(!1);markAsTouched(){this.selfTouched.set(!0)}markAsDirty(){this.selfDirty.set(!0)}markAsPristine(){this.selfDirty.set(!1)}markAsUntouched(){this.selfTouched.set(!1)}fieldBindings=I([]);constructor(e){this.node=e}dirty=s(()=>{let e=this.selfDirty()&&!this.isNonInteractive();return this.node.structure.reduceChildren(e,(r,n)=>n||r.nodeState.dirty(),Ve)});touched=s(()=>{let e=this.selfTouched()&&!this.isNonInteractive();return this.node.structure.reduceChildren(e,(r,n)=>n||r.nodeState.touched(),Ve)});disabledReasons=s(()=>[...this.node.structure.parent?.nodeState.disabledReasons()??[],...this.node.logicNode.logic.disabledReasons.compute(this.node.context)]);disabled=s(()=>!!this.disabledReasons().length);readonly=s(()=>(this.node.structure.parent?.nodeState.readonly()||this.node.logicNode.logic.readonly.compute(this.node.context))??!1);hidden=s(()=>(this.node.structure.parent?.nodeState.hidden()||this.node.logicNode.logic.hidden.compute(this.node.context))??!1);name=s(()=>{let e=this.node.structure.parent;return e?`${e.name()}.${this.node.structure.keyInParent()}`:this.node.structure.fieldManager.rootName});debouncer=s(()=>{if(this.node.logicNode.logic.hasMetadata(de)){let r=this.node.logicNode.logic.getMetadata(de).compute(this.node.context);if(r)return n=>r(this.node.context,n)}return this.node.structure.parent?.nodeState.debouncer?.()});isNonInteractive=s(()=>this.hidden()||this.disabled()||this.readonly())},me=class{newRoot(e,r,n,i){return new j({kind:"root",fieldManager:e,value:r,pathNode:n,logic:n.builder.build(),fieldAdapter:i})}newChild(e){return new j(e)}createNodeState(e){return new he(e)}createValidationState(e){return new ae(e)}createStructure(e,r){return e.createStructure(r)}},fe=class{injector;rootName;constructor(e,r){this.injector=e,this.rootName=r??`${this.injector.get(Re)}.form${mt++}`}structures=new Set;createFieldManagementEffect(e){F(()=>{let r=new Set;this.markStructuresLive(e,r);for(let n of this.structures)r.has(n)||(this.structures.delete(n),c(()=>n.destroy()))},{injector:this.injector})}markStructuresLive(e,r){r.add(e);for(let n of e.children())this.markStructuresLive(n.structure,r)}},mt=0;function ft(t){let e,r,n;return t.length===3?[e,r,n]=t:t.length===2?tt(t[1])?[e,r]=t:[e,n]=t:[e]=t,[e,r,n]}function gt(...t){let[e,r,n]=ft(t),i=n?.injector??f(R),a=W(i,()=>H.rootCompile(r)),d=new fe(i,n?.name),o=n?.adapter??new me,l=j.newRoot(d,e,a,o);return d.createFieldManagementEffect(l.structure),l.fieldProxy}async function pt(t,e){let r=t();if(Ye(r),!r.invalid()){r.submitState.selfSubmitting.set(!0);try{let n=await e(t);n&&yt(r,n)}finally{r.submitState.selfSubmitting.set(!1)}}}function yt(t,e){u(e)||(e=[e]);let r=new Map;for(let n of e){let i=be(n,t.fieldProxy),a=i.field(),d=r.get(a);d||(d=[],r.set(a,d)),d.push(i)}for(let[n,i]of r)n.submitState.serverErrors.set(i)}function Ye(t){t.markAsTouched();for(let e of t.structure.children())Ye(e)}var bt=new A("");var we=class{field;constructor(e){this.field=e}control=this;get value(){return this.field().value()}get valid(){return this.field().valid()}get invalid(){return this.field().invalid()}get pending(){return this.field().pending()}get disabled(){return this.field().disabled()}get enabled(){return!this.field().disabled()}get errors(){let e=this.field().errors();if(e.length===0)return null;let r={};for(let n of e)r[n.kind]=n;return r}get pristine(){return!this.field().dirty()}get dirty(){return this.field().dirty()}get touched(){return this.field().touched()}get untouched(){return!this.field().touched()}get status(){if(this.field().disabled())return"DISABLED";if(this.field().valid())return"VALID";if(this.field().invalid())return"INVALID";if(this.field().pending())return"PENDING";throw Error("AssertionError: unknown form control status")}valueAccessor=null;hasValidator(e){return e===Fe.required?this.field().required():!1}updateValueAndValidity(){}},wt=new A(""),Mt={create:Pe,update:ke},Wt=(()=>{class t{element=f(Ae).nativeElement;injector=f(R);field=je.required();state=s(()=>this.field()());[Ie]=Mt;config=f(bt,{optional:!0});classes=Object.entries(this.config?.classes??{}).map(([r,n])=>[r,s(()=>n(this.state()))]);controlValueAccessors=f(Oe,{optional:!0,self:!0});interopNgControl;get \u0275interopControl(){return this.controlValueAccessors?.[0]??this.interopNgControl?.valueAccessor??void 0}getOrCreateNgControl(){return this.interopNgControl??=new we(this.state)}\u0275register(){F(r=>{let n=this.state();n.nodeState.fieldBindings.update(i=>[...i,this]),r(()=>{n.nodeState.fieldBindings.update(i=>i.filter(a=>a!==this))})},{injector:this.injector})}static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t,selectors:[["","field",""]],inputs:{field:[1,"field"]},features:[_e([{provide:wt,useExisting:t},{provide:Ke,useFactory:()=>f(t).getOrCreateNgControl()}])]})}return t})();function St(t){return new Se(t)}function Et(t,e){return new Ee(t,e)}function Nt(t,e){return new Ne(t,e)}function Ct(t){return new Me(t)}var Me=class{__brand=void 0;kind="";field;message;constructor(e){e&&Object.assign(this,e)}},O=class{__brand=void 0;kind="";field;message;constructor(e){e&&Object.assign(this,e)}},Se=class extends O{kind="required"};var Ee=class extends O{minLength;kind="minLength";constructor(e,r){super(r),this.minLength=e}},Ne=class extends O{maxLength;kind="maxLength";constructor(e,r){super(r),this.maxLength=e}};function Ze(t){let e=t;return typeof e.length=="number"?e.length:e.size}function C(t,e){return t instanceof Function?t(e):t}function Ce(t){return typeof t=="number"?isNaN(t):t===""||t===!1||t==null}function Dt(t){return typeof t=="object"&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function We(t){return Dt(t)?Ct(t):t}function At(t){return t==null?t:u(t)?t.map(We):We(t)}function De(t,e){ge(t),g.unwrapFieldPath(t).builder.addSyncErrorRule(n=>At(be(e(n),n.field)))}function Zt(t,e,r){let n=w(t,h(),i=>typeof e=="number"?e:e(i));w(t,ve,({state:i})=>i.metadata(n)()),De(t,i=>{if(Ce(i.value()))return;let a=i.state.metadata(n)();if(a!==void 0&&Ze(i.value())>a)return r?.error?C(r.error,i):Nt(a,{message:C(r?.message,i)})})}function qt(t,e,r){let n=w(t,h(),i=>typeof e=="number"?e:e(i));w(t,ye,({state:i})=>i.metadata(n)()),De(t,i=>{if(Ce(i.value()))return;let a=i.state.metadata(n)();if(a!==void 0&&Ze(i.value())<a)return r?.error?C(r.error,i):Et(a,{message:C(r?.message,i)})})}function Qt(t,e){let r=w(t,h(),n=>e?.when?e.when(n):!0);w(t,pe,({state:n})=>n.metadata(r)()),De(t,n=>{if(n.state.metadata(r)()&&Ce(n.value()))return e?.error?C(e.error,n):St({message:C(e?.message,n)})})}var Rt=["*"];var It=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Pt=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],kt=new A("MAT_CARD_CONFIG"),ur=(()=>{class t{appearance;constructor(){let r=f(kt,{optional:!0});this.appearance=r?.appearance||"raised"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Z({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:8,hostBindings:function(n,i){n&2&&Q("mat-mdc-card-outlined",i.appearance==="outlined")("mdc-card--outlined",i.appearance==="outlined")("mat-mdc-card-filled",i.appearance==="filled")("mdc-card--filled",i.appearance==="filled")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Rt,decls:1,vars:0,template:function(n,i){n&1&&(q(),P(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return t})(),lr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var hr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})();var mr=(()=>{class t{align="start";static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(n,i){n&2&&Q("mat-mdc-card-actions-align-end",i.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return t})(),fr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Z({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:Pt,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(n,i){n&1&&(q(It),P(0),xe(1,"div",0),P(2,1),Te(),P(3,2))},encapsulation:2,changeDetection:0})}return t})(),gr=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275dir=v({type:t,selectors:[["mat-card-footer"]],hostAttrs:[1,"mat-mdc-card-footer"]})}return t})();export{gt as a,pt as b,Wt as c,Zt as d,qt as e,Qt as f,ur as g,lr as h,hr as i,mr as j,fr as k,gr as l};
